/*
 * =============================================================================
 * CSS 变量定义 (CSS Variables Definition)
 * =============================================================================
 * 此处定义了用于主题化和统一样式的所有CSS变量。
 * 变量被组织成浅色主题、深色主题以及不区分主题的通用尺寸变量。
 */

/* -------------------------------------------------------------------------- */
/*                                 浅色主题 (Light Theme)                       */
/* -------------------------------------------------------------------------- */

:root {
    /* --- 全局与背景 (Global & Background) --- */
    --mindmap-bg-color: #fcfcfc; /* 思维导图画布的背景颜色 */

    /* --- 思维导图节点 (Mind Map Nodes) --- */
    --node-text-color: #555555; /* 节点内文字的颜色 */
    --node-rect-fill: #ffffff; /* 普通节点背景矩形的填充颜色 */
    --node-rect-stroke: #777777; /* 普通节点背景矩形的边框颜色 */
    --node-root-fill: #f8f9fa; /* 根节点背景矩形的填充颜色 */
    --node-selected-stroke: #444444; /* 被选中节点边框的高亮颜色 */
    --node-highlight-fill: #ffeb3b; /* 搜索高亮节点的填充颜色 */
    --node-highlight-text-color: #2d3238; /* 搜索高亮节点的文字颜色 */
    --node-highlight-stroke-color: #978e41; /* 搜索高亮节点的边框颜色 */
    --node-highlight-selected-stroke-color: #da6d00; /* 选中高亮节点的边框颜色 */
    --drop-target-stroke: #28a745; /* 节点拖拽时，可作为父节点的目标节点边框高亮颜色 */

    /* --- 连接线 (Links) --- */
    --link-stroke: #adb5bd; /* 节点之间连接线的颜色 */

    /* --- 菜单 (Controls - Menus, Buttons) --- */
    --menu-font-color: #333333; /* 深色主文字 */
    --menu-bg-color: #f1f3f5; /* 比画布稍深的浅灰背景 */
    --menu-border-color: #dee2e6; /* 菜单边框颜色 */
    --menu-box-shadow: 0 2px 6px rgba(16, 24, 40, 0.06); /* 轻微阴影增加浮起感 */
    --menu-button-bg-color: #ffffff; /* 按钮背景为白色 */
    --menu-button-icon-color: #555555; /* 按钮图标深色 */
    --menu-item-text-color: #333333; /* 菜单项文字颜色与整体一致 */
    --menu-item-hover-bg-color: #e9ecef; /* 悬停背景为浅灰色 */

    /* --- 右键菜单 (Context Menu) --- */
    --context-menu-bg: #ffffff; /* 右键菜单背景 */
    --context-menu-border: #e0e0e0; /* 右键菜单边框 */
    --context-menu-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* 右键菜单阴影 */
    --context-menu-text: #333333; /* 右键菜单文本颜色 */
    --context-menu-hover-bg: #f0f0f0; /* 右键菜单项悬停背景 */
    --context-menu-hover-text: #333333; /* 右键菜单项悬停文本颜色 */
    --context-menu-separator: #e0e0e0; /* 右键菜单分隔线颜色 */
    --context-menu-shortcut-text: #888888; /* 右键菜单快捷键文本颜色 */

    /* --- 小地图 (Minimap) --- */
    --minimap-bg-color: rgba(255, 255, 255, 0.85); /* 小地图的背景颜色 (带透明度) */
    --minimap-border-color: #dee2e6; /* 小地图的边框颜色 */
    --minimap-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* 小地图的阴影 */
    --minimap-node-fill: #ced4da; /* 小地图中普通节点的填充颜色 */
    --minimap-node-stroke: #adb5bd; /* 小地图中普通节点的边框颜色 */
    --minimap-node-root-fill: #adb5bd; /* 小地图中根节点的填充颜色 */
    --minimap-node-selected-fill: #495057; /* 小地图中被选中节点的填充颜色 */
    --minimap-node-selected-stroke: #343a40; /* 小地图中被选中节点的边框颜色 */
    --minimap-node-highlight-fill: #ffeb3b; /* 小地图中高亮节点的填充颜色 */
    --minimap-link-stroke: #e9ecef; /* 小地图中连接线的颜色 */
    --minimap-viewport-fill: rgba(13, 110, 253, 0.15); /* 小地图中代表当前视窗的矩形填充颜色 */
    --minimap-viewport-stroke: #0d6efd; /* 小地图中代表当前视窗的矩形边框颜色 */

    /* --- 搜索 (Search) --- */
    --search-bg-color: #555555;
    --search-input-border-color: #ffffff;
    --search-input-border-focus-color: #4eacff;
    --search-close-button-color: #d8d8d8;
    --search-close-button-hover-color: #ffffff;
    --search-close-bg-color: rgba(51, 51, 51, 0);
    --search-close-bg-hover-color: rgba(51, 51, 51, 1);

    /* --- 信息页面 --- */
    --message-overlay-font-color: #f00;
    --message-overlay-buttom-font-color: #444;
    --message-overlay-buttom-border-color: #e0e0e0;
    --message-overlay-buttom-hover-bg-color: #444;

    /* --- 非主题化通用变量 (Universal Variables - Sizing, Fonts, etc.) --- */
    --node-font-size: 15px; /* 普通节点的字体大小 */
    --node-root-font-size: 16px; /* 根节点的字体大小 */
    --node-font-weight: 400; /* 普通节点的字体字重 */
    --node-root-font-weight: 700; /* 根节点的字体字重 (700 is bold) */
    --node-stroke-width: 2px; /* 节点边框的宽度 */
    --node-border-radius: 8px; /* 节点矩形的圆角半径 */
    --link-stroke-width: 2px; /* 连接线的宽度 */
    --node-text-padding: 10px; /* 节点进入编辑模式时，输入框的内部边距 */
    --button-font-size: 14px; /* 控制器按钮的字体大小 */
}

/* -------------------------------------------------------------------------- */
/*                                 深色主题 (Dark Theme)                        */
/* -------------------------------------------------------------------------- */

html[data-theme='dark'] {
    /* --- 全局与背景 --- */
    --mindmap-bg-color: #1e1e1e;

    /* --- 思维导图节点 --- */
    --node-text-color: #e0e0e0;
    --node-rect-fill: #2c2c2c;
    --node-rect-stroke: #5a5a5a;
    --node-root-fill: #3a3a3a;
    --node-selected-stroke: #dee2e6;
    --node-highlight-fill: #ffeb3b;
    --node-highlight-text-color: #212529;
    --node-highlight-stroke-color: #ffa000; /* 搜索高亮节点的边框颜色 */
    --node-highlight-selected-stroke-color: #f57c00; /* 选中高亮节点的边框颜色 */
    --drop-target-stroke: #34c759;

    /* --- 连接线 --- */
    --link-stroke: #555;

    /* --- 菜单 --- */
    --menu-font-color: #333333;
    --menu-bg-color: #2c2c2c;
    --menu-border-color: #444444;
    --menu-button-bg-color: #1e1e1e;
    --menu-box-shadow: 0 2px 6px rgba(16, 24, 40, 0.06);
    --menu-button-icon-color: #ffffff;
    --menu-item-text-color: #ffffff;
    --menu-item-hover-bg-color: #3a3a3a;

    /* --- 右键菜单 (Context Menu) --- */
    --context-menu-bg: #2c2c2c;
    --context-menu-border: #444444;
    --context-menu-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    --context-menu-text: #e0e0e0;
    --context-menu-hover-bg: #3a3a3a;
    --context-menu-hover-text: #ffffff;
    --context-menu-separator: #444444;
    --context-menu-shortcut-text: #aaaaaa;

    /* --- 小地图 --- */
    --minimap-bg-color: rgba(30, 30, 30, 0.85);
    --minimap-border-color: #484848;
    --minimap-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    --minimap-node-fill: #5a5a5a;
    --minimap-node-stroke: #484848;
    --minimap-node-root-fill: #777;
    --minimap-node-selected-fill: #dee2e6;
    --minimap-node-selected-stroke: #f8f9fa;
    --minimap-node-highlight-fill: #ffeb3b; /* 小地图中高亮节点的填充颜色 */
    --minimap-link-stroke: #3a3a3a;
    --minimap-viewport-fill: rgba(0, 122, 255, 0.25);
    --minimap-viewport-stroke: #007aff;

    /* --- 搜索 --- */
    --search-bg-color: #2a2a2a;
    --search-input-border-color: #ffffff;
    --search-input-border-focus-color: #5ab1ff;
    --search-close-button-color: #d8d8d8;
    --search-close-button-hover-color: #ffffff;
    --search-close-bg-color: rgba(51, 51, 51, 0);
    --search-close-bg-hover-color: rgba(51, 51, 51, 1);

    /* --- 信息页面 --- */
    --message-overlay-font-color: #f00;
    --message-overlay-buttom-font-color: #444;
    --message-overlay-buttom-border-color: #e0e0e0;
    --message-overlay-buttom-hover-bg-color: #444;
}

/*
 * =============================================================================
 * 全局基础样式 (Global Base Styles)
 * =============================================================================
 * 此部分定义了文档范围内的基础样式，确保在不同浏览器和环境中表现一致。
 */

/*
 * 盒子模型重置 (Box-sizing Reset)
 * ---------------------------------------------------------------------------
 * 为所有元素和伪元素设置 `box-sizing: border-box` 模型。
 * 这使得元素的宽度和高度计算包含内边距（padding）和边框（border），
 * 从而让布局和尺寸控制更加直观和可预测。
 */
*,
*::before,
*::after {
    box-sizing: border-box;
}

* {
    -webkit-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

html,
body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    font-size: 16px;
    overflow: hidden;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
    background-color: var(--mindmap-bg-color);
}
